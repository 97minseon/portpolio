
-- 순서 :    회원 / 비회원 / 상품 / 장바구니 / 구매 / 결제 / 배송 / 문의 / 공지 


-------------------------------------------------------------------------------- 회원 (user)

-- 회원(user) 의 시퀀스 생성
create sequence seq_user;
-- 회원(user) 테이블 생성
create table tbl_user (
    user_id     varchar2(50) not null primary key,      -- 아이디
    user_name   varchar2(50) not null,                  -- 이름
    pwd	        varchar2(50) not null,                  -- 비밀번호
    email	    varchar2(50) not null,                  -- 이메일
    phone	    varchar2(50) not null,                  -- 연락처
    post_code   varchar2(30),                           -- 우편번호 (선택)
    addr        varchar2(50),                           -- 주소 (선택)
    addr2       varchar2(50),                           -- 상세주소 (선택)
    auth        char(1) default 'm'                     -- 권한
);

-- 커밋
commit;

-- 조회
select * from tbl_user;

-- drop
drop sequence seq_user;
drop table tbl_user;


-------------------------------------------------------------------------------- 상품 (item)

-- 상품(item) 의  시퀀스 생성
create sequence seq_item;
-- 상품 테이블 생성
create table tbl_item (
    item_id     number(10) not null primary key,        -- 상품 번호 (시퀀스 사용)
    category    varchar2(10) not null,                  -- 상품 분류
    item_name   varchar2(30) not null,                  -- 상품 이름
    item_price  number(10) not null,                    -- 상품 가격
    description varchar2(1000) not null,                -- 상품 설명
    update_date date default sysdate                    -- 수정일
);

-- 상품 이미지 의 시퀀스 생성
create sequence seq_file_item;
-- 상품 이미지 등록
create table tbl_file_item(
    fid         varchar2(50) not null primary key,      -- 이미지 번호 (시퀀스 사용)
    fileName    varchar2(50) not null,                  -- 파일 이름
    image       char(1) default 'I',                    -- 이미지 유무
    uuid        varchar2(50) not null,                  -- UUID
    uploadPath  varchar2(50) not null                   -- 저장 경로
);

-- 커밋
commit;

-- 조회
select * from tbl_item;
select * from tbl_file_item;

-- drop item
drop sequence seq_item;
drop table tbl_item;
-- drop file
drop sequence seq_file_item;
drop table tbl_file_item;


-------------------------------------------------------------------------------- 장바구니 (cart)

-- 장바구니(cart) 의 시퀀스 생성
create sequence seq_cart;
-- 장바구니(cart) 테이블 생성
create table tbl_cart (
    cart_id     number(30) not null primary key,    -- 카트 번호 (시퀀스 사용)
    user_id     number(30),                         -- 회원 번호
    item_id     number(30),                         -- 상품 번호
    item_name   varchar2(50),                       -- 상품 이름
    amount      number(10),                         -- 상품 수량
    cart_price  number(10)                          -- 합산 가격
);

-- drop
drop sequence seq_cart;
drop table cart;

-- 커밋
commit;

-- 조회
select * from cart;


-------------------------------------------------------------------------------- 구매 (buy)

-- 회원구매(user_buy) 의 시퀀스 생성
create sequence seq_user_buy;
-- 회원구매(user_buy) 테이블 생성
create table tbl_user_buy (
    bno         number(10) not null primary key,        -- 시퀀스
    buy_no      varchar2(100) not null unique,          --주문번호
    user_id     varchar2(30) not null,                  -- 주문자아이디
    buyer_name  varchar2(30) not null,                  -- 배송받을 이름
    phone       varchar2(30) not null,                  -- 연락처
    post_code   varchar2(10) not null,                  -- 우편번호
    addr        varchar2(100) not null,                 -- 주소    
    addr2       varchar2(100) not null,                 -- 주소(상세)
    buy_status  varchar2(20),                           -- 주문상태
    buy_date    date default sysdate                    -- 주문한 날짜
);

-- 비회원구매(guest_buy)의 시퀀스 생성
create sequence seq_guest_buy;
-- 비회원구매(guest_buy) 테이블 생성
create table tbl_guest_buy (
    gno         number(10) not null primary key,  -- 시퀀스
    buy_no      varchar2(100) not null unique,  --주문번호
    pwd         varchar2(30),  -- 비회원 비밀번호
    buyer_name  varchar2(30) not null,   -- 배송받을 이름
    post_code   varchar2(10),     -- 우편번호
    addr        varchar2(100),         -- 주소    
    addr2       varchar2(100),        -- 주소(상세)
    buy_status  varchar2(20),  -- 주문상태
    buy_date    date default sysdate -- 주문한 날짜
);

drop sequence seq_user_buy;
drop table tbl_user_buy;

drop sequence seq_guest_buy;
drop table tbl_guest_buy;

select * from tbl_user_buy;
select * from tbl_guest_buy;

create sequence seq_buy_list;
create table tbl_buy_list (
    blist_no number(10) not null primary key,   -- 주문목록 번호
    buy_no varchar2(100) unique,                -- 조회 번호
    item_id number(10),                         -- 상품 번호
    item_name varchar2(50),                     -- 상품 이름
    amount number(10),                          -- 수량
    buy_price number(10),                       -- 가격
    delivery_cost number(10)                    -- 배송비
);

-- 커밋
commit;

-- 조회
select * from buy;

drop table buy;
drop SEQUENCe seq_buy;


-------------------------------------------------------------------------------- 결제 (pay)






-------------------------------------------------------------------------------- 문의 (inquiry)

-- 문의 의 시퀀스 생성
create sequence seq_inquiry;
-- 문의 테이블 생성
CREATE TABLE tbl_inquiry (
  qno NUMBER(10) NOT NULL PRIMARY KEY,          -- 번호 (시퀀스 사용)
  title VARCHAR2(100) NOT NULL,                 -- 제목
  content VARCHAR2(100) NOT NULL,               -- 내용
  wrtier VARCHAR2(100) NOT NULL,                -- 작성자
  register_date DATE NOT NULL,                  -- 등록일
  update_date DATE DEFAULT SYSDATE,             -- 수정일
  reply_cnt NUMBER(10)                          -- 댓글 수
);

-- 커밋
commit;

-- 조회
select * from tbl_inquiry;



-------------------------------------------------------------------------------- 공지 (notice)

-- 시퀀스 생성
create sequence seq_notice;
-- 테이블 생성
create table notice(
    bno number(10) not null primary key,
    title varchar2(150) not null,
    content varchar2(2000) not null,
    writer varchar2(50) not null,
    regdate date default sysdate,
    updatedate date default sysdate
);

-- 커밋
commit;
